api-version: ${PARTUP_API_VERSION}
disklabel: ${DISKLABEL}

emmc-boot-partitions:
  enable: true
  input-offset: ${EMMC_BOOT_INPUT_OFFSET}
  output-offset: ${EMMC_BOOT_OUTPUT_OFFSET}
  input:
    uri: file://${BOOTLOADER_URI}

raw:
  - input-offset: ${BOOTLOADER_INPUT_OFFSET}
    output-offset: ${BOOTLOADER_OUTPUT_OFFSET}
    input:
      uri: file://${BOOTLOADER_URI}

partitions:
  - label: BOOT0
    type: primary
    filesystem: fat32
    flags:
      - boot
    size: ${BOOT_SIZE}
    offset: 4MiB
    input:
      - uri: file://${KERNEL_URI}
      - uri: file://${DTB_URI}

  - label: BOOT1
    type: primary
    filesystem: fat32
    size: ${BOOT_SIZE}
    input:
      - uri: file://${KERNEL_URI}
      - uri: file://${DTB_URI}

  - label: CONFIG
    type: primary
    filesystem: ext4
    size: ${CONFIG_SIZE}
    input:
      - uri: file://${CONFIG_URI}

  - label: ROOT0
    type: ${ROOTFS_TYPE}
    filesystem: null
    expand: true
    block-size: 4kiB
    input:
      - uri: file://${ROOTFS_URI}

  - label: ROOT1
    type: ${ROOTFS_TYPE}
    filesystem: null
    expand: true
    block-size: 4kiB
    input:
      - uri: file://${ROOTFS_URI}
