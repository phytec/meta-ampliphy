From a0ea51cc986ebcd4f66ead11ba76e82568cddd68 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Stefan=20Riedm=C3=BCller?= <s.riedmueller@phytec.de>
Date: Fri, 5 Dec 2025 16:21:35 +0100
Subject: [PATCH 3/4] ipa: nxp: neo: Add small fixes
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Upstream-Status: Inappropriate [PHYTEC/NXP specific]

Signed-off-by: Stefan Riedm√ºller <s.riedmueller@phytec.de>
---
 src/ipa/nxp/neo/neo_ipa.cpp | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/src/ipa/nxp/neo/neo_ipa.cpp b/src/ipa/nxp/neo/neo_ipa.cpp
index 1bae38115d3b..bb98050f26b6 100644
--- a/src/ipa/nxp/neo/neo_ipa.cpp
+++ b/src/ipa/nxp/neo/neo_ipa.cpp
@@ -273,7 +273,8 @@ int IPANxpNeo::configure(const IPAConfigInfo &ipaConfig,
 	 * \todo take VBLANK into account for maximum exposure time
 	 */
 	context_.configuration.sensor.minExposureTime = vMinExposure[0] * 1.0s;
-	context_.configuration.sensor.maxExposureTime = vMaxExposure[0] * 1.0s;
+	context_.configuration.sensor.maxExposureTime = info.minLineLength * info.minFrameLength *
+				1.0s / info.pixelRate;
 
 	context_.configuration.sensor.minAnalogueGain = vMinGain[0];
 	context_.configuration.sensor.maxAnalogueGain = vMaxGain[0];
-- 
2.43.0

